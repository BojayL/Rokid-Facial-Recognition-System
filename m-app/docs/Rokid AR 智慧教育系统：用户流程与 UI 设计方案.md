# Rokid AR 智慧教育系统：用户流程与 UI 设计方案

## 一、 用户使用流程设计 (User Journey)

本流程设计遵循“低干扰”原则，确保教师在授课过程中，仅通过眼镜获取最关键信息，避免视线遮挡。

### 阶段 1：课前准备 (Binding & Setup)

1. **启动与检查**：
   - 教师佩戴 Rokid 眼镜，开机。
   - 打开手机端 APP，系统自动检测眼镜连接状态。
2. **配对连接 (Pairing)**：
   - **情况 A：已连接 (USB直连/自动重连)**
     - 若通过 Type-C 线缆连接或已记录蓝牙设备，APP 自动启动后台服务，直接跳转至身份绑定。
   - **情况 B：未配对 (二维码扫码配对)**
     - **手机端**：检测到无设备连接时，屏幕中央自动生成一个**动态配对二维码**（包含 SSID、密码、WebSocket 服务地址或蓝牙 MAC 信息）。
     - **眼镜端**：启动后默认进入“扫码待机模式”，HUD 中央显示提示：“请注视手机二维码”。
     - **交互动作**：教师注视手机屏幕，眼镜摄像头捕捉二维码。
     - **反馈**：
       - 识别成功：眼镜端显示绿色“√”动画并震动提示“配对成功”。
       - 手机端：二维码消失，跳转至“开始上课”界面。
3. **身份绑定 (Session Init)**：
   - **手机端**：显示“开始上课”大按钮，点击后生成本次课程的 Session ID 并同步至眼镜。
   - **眼镜端**：状态栏显示“就绪”图标，正式进入工作模式。

### 阶段 2：课中识别 (In-Class Recognition)

此阶段为核心高频场景，分为三个状态循环：

#### 步骤 A：扫描态 (Scanning)

- **动作**：教师自然环视教室。
- **眼镜反馈**：
  - 屏幕中心显示极简的**“准心” (Reticle)**。
  - 实时检测人脸，当检测到人脸时，在人脸周围绘制**白色（单色高亮）线框**。
- **逻辑**：系统在后台静默进行检测，暂不触发识别请求，节省电量与带宽。

#### 步骤 B：锁定与识别 (Lock & Identify)

- **动作**：教师视线停留在某位学生脸上（头部保持相对静止约 0.5-1 秒），或手指轻触眼镜触摸板（手动触发）。
- **眼镜反馈**：
  - 人脸线框由虚线变为**实线/加粗**（表示已锁定）。
  - 线框旁出现**加载动画**（如简单的旋转圆圈或三个跳动的点）。
- **数据流**：眼镜截取当前帧 -> 传输至后端 -> 后端比对特征。

#### 步骤 C：结果展示 (Result Display)

- **成功识别**：
  - **眼镜端**：在人脸旁悬浮显示“信息卡片”（仅包含：姓名、关键标签，如“出勤正常”）。
  - **手机端**：立即弹出该学生的完整档案（照片、历史成绩、详细考勤记录），供教师低头查看详情。
- **识别失败/陌生人**：
  - **眼镜端**：显示“未录入”或“？”图标，并在 2 秒后自动消失。

### 阶段 3：交互与处置 (Interaction)

- **切换对象**：教师转头看向下一位学生，旧信息卡片消失，重新进入“扫描态”。
- **信息录入**：若发现识别错误或需通过眼镜快速标记（如记录一次回答问题）：
  - **动作**：双击触摸板。
  - **反馈**：眼镜显示“已记录”，后端为该学生增加一条“课堂互动”记录。

## 二、 眼镜端 UI 界面设计 (单色显示适配)

由于 Rokid 光波导显示屏为**单色（通常是绿色/青色）**，且背景是透明的现实环境，UI 设计必须遵循以下原则：

1. **高对比度**：只使用纯亮色（像素点亮）和纯透明（像素关闭）。避免灰色或渐变。
2. **线条化**：尽量使用线条 icon 和文字，减少大面积色块填充（避免遮挡视线）。
3. **避让中心**：核心视觉区尽量留白，信息分布在四周。

### 1. 界面布局 (HUD Layout)

界面划分为三个图层区域：

```
+-------------------------------------------------------+
|  [状态栏: WiFi图标  电量: 80%] (顶部边缘，极小字号)      |
|                                                       |
|                                                       |
|            (视觉中心 - 留白或仅显示准心)                 |
|                     +                                 |
|                                                       |
|                                                       |
|    [ 动态层：跟随人脸移动的信息气泡 ]                      |
|    +------------------------+                         |
|    |  [Icon] 张三           |                         |
|    |  A班 | 正常            |                         |
|    +------------------------+                         |
|                                                       |
+-------------------------------------------------------+
```

### 2. 关键 UI 元素样式定义

#### A. 准心 (Reticle)

- **样式**：一个小型的“+”号或断开的圆环。
- **位置**：屏幕正中央，永久常驻（或仅在扫描态显示）。
- **作用**：帮助教师确认摄像头正对的位置。

#### B. 人脸框 (Face Box)

- **未锁定态**：细实线矩形框 `[ ]`，跟随人脸移动。
- **锁定/识别中**：四角加粗的断角框（类似于相机对焦框），并伴有呼吸闪烁效果（模拟加载中）。
- **识别完成**：框体消失，转化为信息卡片；或者框体变为常亮实线。

#### C. 信息卡片 (Info Card) - 核心组件

这是单色屏幕上最难设计的部分，建议放弃复杂的 UI 背景，采用**纯文字+线条**。

- **样式方案**：

  - **布局**：左侧为极简状态 Icon，右侧为文字。
  - **字体**：姓名使用**最大字号、加粗**；辅助信息（班级、状态）使用小字号。
  - **背景**：**不要**使用半透明黑色背景（单色屏无法显示灰色/半透明）。建议使用**带边框的镂空设计**，或者在文字下方加一条下划线作为视觉分割。

- **视觉模拟 (ASCII)**：

  ```
  +----------------------+
  |  (人脸图标)  张三      |  <-- 姓名高亮/大号字
  |  ------------------  |
  |  高三(2)班   [优]     |  <-- 辅助信息
  +----------------------+
  ```

#### D. 状态图标 (Icons)

- 所有图标必须是**线性图标 (Outline)**，而非填充图标 (Solid)，以保证在现实背景下的清晰度。
- **正常/优秀**：简单的 `√` 或 笑脸。
- **警告/缺勤**：`!` 或 三角形。
- **处理中**：旋转的虚线圈。

### 3. 字体与可读性策略

- **字号**：Rokid 分辨率较高但视场角（FOV）有限。最小字号建议不小于 24sp（Android 定义），确保在 2-3 米视距下清晰可见。
- **排版**：尽量单行显示，最多不超过两行。
- **颜色映射**：
  - UI 设计稿中使用 **纯白色 (#FFFFFF)** 代表“点亮/显示”。
  - UI 设计稿中使用 **纯黑色 (#000000)** 代表“透明/不显示”。
  - **禁止使用灰色**，因为在单色光波导上，灰色会被处理成稀疏的噪点或直接丢失。

### 4. 异常提示设计

当网络断开或识别服务不可用时，需要明显的视觉提示：

- **位置**：屏幕正中。
- **样式**：一个巨大的划线 WiFi 图标或“离线”文字，闪烁三次后缩小至状态栏。

## 三、 开发注意事项 (Android View)

在 Android Studio 中开发 Rokid 应用界面时：

1. **Theme 设置**： 使用 `Theme.NoTitleBar.Fullscreen`。 背景色设置为 `android:background="#000000"` (全黑即全透明)。

2. **Canvas 绘制**： 人脸框和连线建议使用 `SurfaceView` 或自定义 `View` 的 `onDraw` 方法进行绘制。 Paint 设置：

   ```
   Paint paint = new Paint();
   paint.setColor(Color.WHITE); // 在眼镜里显示为绿色/青色
   paint.setStyle(Paint.Style.STROKE); // 描边风格
   paint.setStrokeWidth(4f); // 适当加粗线条
   paint.setAntiAlias(false); // 单色屏有时关闭抗锯齿边缘更锐利
   ```

3. **避免图像显示**： 不要尝试在眼镜上显示学生的证件照（位图）。单色显示屏显示照片效果极差（像抖动的报纸印刷点阵），且传输耗时。照片只在手机端显示。