# AR 智慧课堂伴侣 (手机端) 产品需求文档 (PRD)

| 项目名称 | Rokid AR 智慧教育系统 - 移动端 | 版本号   | V1.1    |
| -------- | ------------------------------ | -------- | ------- |
| 对应硬件 | Rokid CXR-M / CXR-S            | 开发框架 | Flutter |
| 更新日期 | 2023-10-27                     | 状态     | 待评审  |

## 一、 产品概述 (Overview)

### 1.1 产品定位

本应用是 Rokid AR 眼镜在教育场景下的**核心伴侣**。它承担以下三大职责：

1. **交互控制中心**：负责眼镜的配对、参数配置及会话管理。
2. **数据扩展屏**：弥补眼镜单色屏幕的缺陷，展示富文本、图片及详细图表数据。
3. **算力与网络桥梁**：协助处理复杂的业务逻辑，并作为眼镜与云端服务器的通信中继（在蓝牙模式下）。

### 1.2 用户画像

- **目标用户**：中小学/高校教师。
- **使用场景**：
  - **课前**：办公室/教室门口，进行设备连接、班级选择。
  - **课中**：手持手机或置于讲台，作为第二屏幕查看识别到的学生详细档案。
  - **课后**：数据修正、考勤统计查看。

## 二、 信息架构 (IA)

应用整体分为四个底部导航 Tab：

1. **课堂 (Classroom)**：核心主页，展示实时识别流、当前课程状态。
2. **学生 (Students)**：班级花名册、学生档案查询、人脸库管理。
3. **设备 (Device)**：眼镜连接状态、二维码配对、参数调节。
4. **我的 (Profile)**：账户信息、通用设置、数据同步。

## 三、 详细功能需求 (Functional Requirements)

### 3.1 模块一：设备连接与管理 (Device & Pairing)

此模块是应用启动后的首要步骤。

| 功能点 ID  | 功能名称             | 需求描述                                                     | 优先级 |
| ---------- | -------------------- | ------------------------------------------------------------ | ------ |
| **DEV-01** | **连接状态监测**     | 首页顶部常驻显示眼镜连接状态（未连接/USB连接/蓝牙连接）及眼镜电量图标。 | P0     |
| **DEV-02** | **二维码配对生成**   | 当检测到未连接时，生成动态二维码（包含 WiFi SSID/PWD, Server IP, Token）。支持调整二维码亮度以适配眼镜摄像头。 | P0     |
| **DEV-03** | **USB 自动唤起**     | 当手机通过 Type-C 插入 Rokid 眼镜时，自动唤起 APP 并启动后台服务。 | P0     |
| **DEV-04** | **参数配置面板**     | 允许调节 SDK 参数并实时下发给眼镜：1. **识别阈值**：低(0.8)/中(0.9)/高(0.95)2. **采集间隔**：连续/手动/5秒一次3. **显示亮度**：调节眼镜光机亮度。 | P1     |
| **DEV-05** | **画面投屏 (Debug)** | (调试用) 实时显示眼镜摄像头的预览画面，用于确认佩戴角度是否正确。 | P2     |

### 3.2 模块二：实时课堂 (Real-time Dashboard)

这是课中高频使用的界面，与眼镜端识别结果联动。

| 功能点 ID  | 功能名称              | 需求描述                                                     | 优先级 |
| ---------- | --------------------- | ------------------------------------------------------------ | ------ |
| **CLS-01** | **课程会话控制**      | 包含“开始上课”和“结束上课”按钮。点击“开始”后，生成 Session ID 推送给眼镜，标记识别记录归属。 | P0     |
| **CLS-02** | **识别结果流 (Feed)** | **核心功能**。采用“卡片流”形式，实时从 WebSocket 接收眼镜识别到的学生 ID。1. 最新识别的学生卡片置顶并高亮。2. 卡片展示：头像(大图)、姓名、学号、最近一次考勤状态。 | P0     |
| **CLS-03** | **详情自动弹窗**      | 提供开关选项：“识别即弹窗”。开启后，当眼镜锁定某学生，手机端自动跳转至该学生的【档案详情页】。 | P1     |
| **CLS-04** | **手动辅助记录**      | 在识别卡片上提供快捷操作按钮：- [提问]: 记录一次课堂互动。- [异常]: 标记状态（如睡觉、玩手机）。 | P1     |

### 3.3 模块三：学生档案管理 (Student Profile)

提供详细的数据查询与管理能力。

| 功能点 ID  | 功能名称         | 需求描述                                                     | 优先级 |
| ---------- | ---------------- | ------------------------------------------------------------ | ------ |
| **STU-01** | **档案详情页**   | 展示眼镜无法显示的详细信息：- **基础信息**：高清证件照、家长联系方式。- **学业信息**：历史成绩折线图、偏科分析。- **行为记录**：本学期迟到次数、课堂互动得分。 | P0     |
| **STU-02** | **人脸特征录入** | 支持多种方式更新学生人脸底库，以提高识别准确率：**方式 A (现场拍摄)**：调用手机摄像头拍摄学生正脸，具备人脸居中引导框。**方式 B (相册导入)**：从手机相册选择照片，**支持手势缩放与移动，提供正方形/圆形裁剪框**，确保截取清晰的人脸区域。**方式 C (远程采集)**：点击“远程采集”，触发眼镜端抓拍当前画面并上传更新。 | P0     |
| **STU-03** | **花名册搜索**   | 支持按姓名、学号模糊搜索；支持按“已识别/未识别”筛选列表。    | P1     |

### 3.4 模块四：消息与推送 (Notification)

| 功能点 ID  | 功能名称         | 需求描述                                                     | 优先级 |
| ---------- | ---------------- | ------------------------------------------------------------ | ------ |
| **MSG-01** | **识别成功震动** | 当眼镜成功识别目标时，手机发出短震动反馈（可关闭），实现“盲操作”感知。 | P2     |
| **MSG-02** | **异常预警**     | 接收后端推送的敏感名单预警（如：重点关注学生），在手机端以红色横幅强提醒。 | P1     |

## 四、 UI/UX 设计原则

1. **暗黑模式 (Dark Mode)**：
   - 为了与 AR 眼镜的科技感保持一致，且考虑到课堂可能存在的投影环境（暗光），APP 默认采用深色主题（#121212 背景）。
   - 关键信息（姓名、分数）使用高亮色（#00E5FF 青色, #FFFFFF 白色）。
2. **大卡片与易读性**：
   - 教师在讲课时只能瞥一眼手机，因此字号需比普通 APP 大 20%。
   - 核心信息卡片化，摒弃复杂的列表线。
3. **单手操作优化**：
   - 考虑到教师可能一手拿粉笔/教鞭，一手拿手机，核心操作区（如确认、切换）应集中在屏幕下半部分。

## 五、 非功能性需求 (NFR)

1. **性能要求**：
   - **冷启动时间**：< 1.5秒。
   - **列表滚动FPS**：保持 60fps，即使在包含大量图片的列表中。
   - **延迟**：从眼镜发送识别请求到手机端展示详情，端到端延迟 < 800ms。
2. **稳定性**：
   - **后台保活**：应用需申请 Android 后台白名单，确保屏幕熄灭时 WebSocket 依然连接，不中断眼镜的数据传输。
   - **断线重连**：网络波动断开后，需在 3秒内 尝试自动重连。
3. **安全性**：
   - **本地数据加密**：缓存的学生数据（特别是照片和特征值）必须使用 AES-256 加密存储。
   - **屏幕防窥**：APP 切换至后台时，多任务预览界面应自动模糊处理（保护学生隐私）。

## 六、 埋点需求 (Analytics)

- **日活/月活**：统计教师的使用频率。
- **识别成功率**：统计“眼镜发起请求”与“后端返回成功”的比例。
- **功能点击率**：统计“详情页查看”与“快捷记录”的使用频次，优化后续版本交互。